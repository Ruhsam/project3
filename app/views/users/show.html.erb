<p id="notice"><%= notice %></p>
<div>
   Welcome, <%= @user.first_name + " " + @user.last_name %>
</div>
<p>
   <strong>First name:</strong>
   <%= @user.first_name %>
</p>

<p>
   <strong>Last name:</strong>
   <%= @user.last_name %>
</p>

<p>
   <strong>Email:</strong>
   <%= @user.email %>
</p>

<p>
   <strong>Phone number:</strong>
   <%= @user.phone_number %>
</p>

<%= link_to 'Edit', edit_user_path(@user) %> <br />


<form action="/appointments" method="post">

   <strong><h2>Appointment Time</h2></strong>
   <input type="text" name="reason_for_visit" placeholder="Reason for Visit"></input>
   <input type="text" name="date"class='datepicker' placeholder="Select a Date"></input>
   <input type="submit" />
   <div class="scrolly"></div>
   <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
</form>

<script type="text/javascript">
$(document).ready(function(){
   $('.datepicker').datepicker();


   $(".datepicker").change(function(){
      date_val=$(".datepicker").val();
      if (date_val==""){
         return
      }
      $.ajax({
         method: 'get',
         datatype: 'json',
         url: '/appointments/availability',
         data: {date: date_val},
         success: onSuccess,
         error: onError,

      });

   });
   function create_item(appointment){
      output='<div class="radio"><label><input name="time" type="radio" value="'
      output+=appointment
      output+='">'
      output+=appointment
      output+='</label></div>'
      return output
   }
   function onSuccess(data, status, jqxhr) {
      output=""
      available_app=data.forEach(function(item){
         output+=create_item(item)
      })
      $(".scrolly").html(output);
   }
   function onError(jqxhr, status, error) {
      $(".scrolly").html("error");
   }
});
</script>
<p>
   <hr />
</p>

<h3>Appointment List</h3>

<% @appointments.each do |apt|  %>
<%= apt.date %>
<%= apt.time %>
<%= apt.reason_for_visit %>
<br />

<!-- <div class="row panel-body">
   <div class="col-sm-5">
      <h2 class="Date"><%= apt.date %></h2>
   </div>
   <div class="col-sm-7">
      <h2 class="Time"><%= apt.time %></h2>
   </div>
   <div class="col-sm-7">
      <h2 class="Reason for Visit"><%= apt.reason_for_visit %></h2>
   </div>
</div> -->

<% end %>
<p>
   <hr />
</p>
